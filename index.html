<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="icon" href="favicon.ico">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
     <link rel="stylesheet" href="weather.css">
</head>
    <style>
       
    </style>
<body onload="getLocation()">
    
        <div id="loading"></div>
        <div class="row text-light">
            <div class="col-12 col-md-8 ps-5 pt-3 bigDispaly">
                <div class="row">
                    <div class="col-12">
                        <input type="text" id="SearchLocation" placeholder="Input Location..." oninput="search ()">
                    </div>
                    <div class="col-12 locate">
                        <div id="displayTemp"><h1 style="font-size: 100px;"></h1></div>
                        <div class="fs-3" id="displayLocation"></div>
                        <div id="displayDescription"></div>
                    </div>
                </div>
            </div>
            <div class=" container2 shadow-lg col-12 col-md-4 p-5 mt-3">
                <div class="row">
                    <div class="col-12 container3">
                        <div class="row">
                            <h3 class="mb-5">Weather Details</h3>
                            <div class="col-6 ">
                                <h5>Location</h5>
                                <h5>Description</h5>
                                <h5>Humidity</h5>
                                <h5>Wind</h5>
                            </div>
                            <div class="col-6">
                                <h5 id="locate"></h5>
                                <h5 id="description"></h5>
                                <h5 id="humidity"></h5>
                                <h5 id="wind"></h5>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 pt-5">
                        <div class="row">
                            <div class="col-6">
                                <h5>Min</h5>
                                <h5>Max</h5>
                                <h5>Feels</h5>
                                <h5>Pressure</h5>
                                
                            </div>
                            <div class="col-6">
                                <h5 id="minimum"></h5>
                                <h5 id="maximum"></h5>
                                <h5 id="feels"></h5>
                                <h5 id="pressure"></h5>
                            </div> 
                            <h6> Designed by <b class="ms-2">Ifzy</b> </h6>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script>
              let key = "3b8e541fa9db321676c5f7497b47ab27"
    function search () {
        loading.innerHTML = '<h1>loading....</h1>'
        let cityName = SearchLocation.value
        let endpoint = `https://api.openweathermap.org/data/2.5/weather?q=${cityName}&appid=${key}`
        fetch(endpoint)
        .then((response)=> response.json())
        .then((convertedResponse)=> {
            loading.innerHTML = ''
            SearchLocation.innerHTML = "";
            let res = convertedResponse
            locate.innerHTML = `${res.name}, ${res.sys.country}`
            description.innerHTML = `${res.weather[0].description}`
            humidity.innerHTML = `${res.main.humidity}%`
            wind.innerHTML = `${res.wind.speed} m/s`
            minimum.innerHTML = `${(res.main.temp_min-273).toFixed(1)}℃`
            maximum.innerHTML = `${(res.main.temp_max-273).toFixed(1)}℃`
            feels.innerHTML = `${(res.main.feels_like-273).toFixed(1)}℃`
            pressure.innerHTML = `${res.main.pressure} hPa`
            displayTemp.innerHTML = `<h1 style='font-size: 100px;'>${(res.main.temp-273).toFixed(0)}℃</h1>`
            displayLocation.innerHTML = `${res.name}, ${res.sys.country}`
            displayDescription.innerHTML = `${res.weather[0].description}`
        })
    }
    function getLocation () {
        // loading.innerHTML = '<h1>Loading....</h1>'
        navigator.geolocation.getCurrentPosition((location)=> {
            let latitude = location.coords.latitude
            let longitude = location.coords.longitude
            let endpoint2 = `https://api.openweathermap.org/data/2.5/weather?lat=${latitude}&lon=${longitude}&appid=${key}`
            fetch(endpoint2).then((response)=> response.json())
            .then((convertedResponse)=> {
                loading.innerHTML = ''
                let convert = convertedResponse
                locate.innerHTML = `${convert.name}, ${convert.sys.country}`
                description.innerHTML = `${convert.weather[0].description}`
                humidity.innerHTML = `${convert.main.humidity}%`
                wind.innerHTML = `${convert.wind.speed} m/s`
                minimum.innerHTML = `${(convert.main.temp_min-273).toFixed(1)}℃`
                maximum.innerHTML = `${(convert.main.temp_max-273).toFixed(1)}℃`
                feels.innerHTML = `${(convert.main.feels_like-273).toFixed(1)}℃`
                pressure.innerHTML = `${convert.main.pressure} hPa`
                displayTemp.innerHTML = `<h1 style='font-size: 100px;'>${(convert.main.temp-273).toFixed(0)}℃</h1>`
                displayLocation.innerHTML = `${convert.name}, ${convert.sys.country}`
                displayDescription.innerHTML = `${convert.weather[0].description}`
            })        
        })
    }
        </script>
    
    
    

</body>
</html>